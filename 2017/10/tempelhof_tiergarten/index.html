<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.90.0 with theme Tranquilpeak 0.4.8-BETA">
<meta name="author" content="Philipp Gärtner">
<meta name="keywords" content=", earth-observation, remote sensing, earth engine, google earth enngine">
<meta name="description" content="The blog post shows how the vegetation of two public parks changes seasonally. Multi-temporal satellite images were used to aggregate monthly histograms of vegetation index values.">


<meta property="og:description" content="The blog post shows how the vegetation of two public parks changes seasonally. Multi-temporal satellite images were used to aggregate monthly histograms of vegetation index values.">
<meta property="og:type" content="article">
<meta property="og:title" content="Intra-annual vegetation density changes of two public parks in Berlin, Germany">
<meta name="twitter:title" content="Intra-annual vegetation density changes of two public parks in Berlin, Germany">
<meta property="og:url" content="https://philippgaertner.github.io/2017/10/tempelhof_tiergarten/">
<meta property="twitter:url" content="https://philippgaertner.github.io/2017/10/tempelhof_tiergarten/">
<meta property="og:site_name" content="Philipp Gärtner Blog">
<meta property="og:description" content="The blog post shows how the vegetation of two public parks changes seasonally. Multi-temporal satellite images were used to aggregate monthly histograms of vegetation index values.">
<meta name="twitter:description" content="The blog post shows how the vegetation of two public parks changes seasonally. Multi-temporal satellite images were used to aggregate monthly histograms of vegetation index values.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2017-10-27T00:00:00">
  
  
    <meta property="article:modified_time" content="2017-10-27T00:00:00">
  
  
  
    
      <meta property="article:section" content="Berlin">
    
      <meta property="article:section" content="NDVI">
    
      <meta property="article:section" content="Tutorial">
    
  
  
    
      <meta property="article:tag" content="Landsat-8">
    
      <meta property="article:tag" content="Google-Earth-Engine">
    
      <meta property="article:tag" content="ggplot2">
    
      <meta property="article:tag" content="tweenr">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@Mixed_Pixels">


  <meta name="twitter:creator" content="@Mixed_Pixels">






  <meta property="og:image" content="//res.cloudinary.com/dj9pbb7v1/image/upload/ar_1:1,b_rgb:ffffff,bo_3px_solid_rgb:000000,c_fill,g_auto,r_max,w_280/v1617807544/histogram_single.jpg">
  <meta property="twitter:image" content="//res.cloudinary.com/dj9pbb7v1/image/upload/ar_1:1,b_rgb:ffffff,bo_3px_solid_rgb:000000,c_fill,g_auto,r_max,w_280/v1617807544/histogram_single.jpg">





  <meta property="og:image" content="https://res.cloudinary.com/dj9pbb7v1/image/upload/v1496825790/qQv2L8sO_o2jbiq.jpg">
  <meta property="twitter:image" content="https://res.cloudinary.com/dj9pbb7v1/image/upload/v1496825790/qQv2L8sO_o2jbiq.jpg">


    <title>Intra-annual vegetation density changes of two public parks in Berlin, Germany</title>

    <link rel="icon" href="https://res.cloudinary.com/dj9pbb7v1/image/upload/v1496825790/qQv2L8sO_o2jbiq.jpg">
    

    

    <link rel="canonical" href="https://philippgaertner.github.io/2017/10/tempelhof_tiergarten/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://philippgaertner.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://philippgaertner.github.io/css/stackoverflow-dark.css">
      
    
      
        <link rel="stylesheet"  href="https://philippgaertner.github.io/css/academicons-1.8.6/css/academicons.css">
      
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-64337138-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://philippgaertner.github.io/">Philipp Gärtner Blog</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://philippgaertner.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://res.cloudinary.com/dj9pbb7v1/image/upload/v1496825790/qQv2L8sO_o2jbiq.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://philippgaertner.github.io/#about">
          <img class="sidebar-profile-picture" src="https://res.cloudinary.com/dj9pbb7v1/image/upload/v1496825790/qQv2L8sO_o2jbiq.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Philipp Gärtner</h4>
        
          <h5 class="sidebar-profile-bio">Jack of all trades, master of some.</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://philippgaertner.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home" title='Home'></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://philippgaertner.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://philippgaertner.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://philippgaertner.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://philippgaertner.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://scholar.google.de/citations?user=6vAmtJUAAAAJ&amp;hl=en" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon ai ai-google-scholar"></i>
      
      <span class="sidebar-button-desc">Google Scholar</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/philippgaertner" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/1765076/philipp-g%c3%a4rtner" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/Mixed_Pixels" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://philippgaertner.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Intra-annual vegetation density changes of two public parks in Berlin, Germany
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2017-10-27T00:00:00Z">
        
  October 27, 2017

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://philippgaertner.github.io/categories/berlin">Berlin</a>, 
    
      <a class="category-link" href="https://philippgaertner.github.io/categories/ndvi">NDVI</a>, 
    
      <a class="category-link" href="https://philippgaertner.github.io/categories/tutorial">Tutorial</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p>The blog post shows how the vegetation of two public parks changes seasonally. Multi-temporal satellite images were used to aggregate monthly histograms of vegetation index values. The visualization was inspired by this <a href="https://twitter.com/MrDataScience/status/890225025139265536">tweet</a> from Christopher Doyle.</p>




<div class="figure center" >
  
    <img class="fig-img" src="https://philippgaertner.github.io/img/2017-10-tempelhof-tiergarten/Histogram_Tiergarten_Tempelhof_animated.gif"  alt="Intra-annual vegetation density changes of two public parks in Berlin, Germany.">
  
   
    <span class="caption">Intra-annual vegetation density changes of two public parks in Berlin, Germany.</span>
  
</div>


<h2 id="green-spaces-in-the-middle-of-the-city">Green spaces in the middle of the city</h2>

<p>The topic in this blog post is Berlin, the pulsating metropolis everyone is talking about, at least that&rsquo;s what most Berliner claim. But I won&rsquo;t write about the club scene nor about hipster migration or the overcrowded, delayed local traffic.</p>

<p>Today, I write about two major parks in Berlins city center and show how their vegetation density changes seasonally over the course of the year. I am writing about the phenology.</p>

<h2 id="areas-of-interest-tiergarten-and-tempelhofer-feld">Areas of Interest: Tiergarten and Tempelhofer Feld</h2>

<p><a href="https://en.wikipedia.org/wiki/Tiergarten_(park)"><strong>Tiergarten</strong></a> is a popular inner-city park between the Kanzleramt and the Sony Business Center.  About half of the Tiergarten consists of meadows the other half of woodland. The park is 210 ha in size and is <a href="https://en.wikipedia.org/wiki/Tiergarten_(park)">among the largest urban gardens of Germany</a>. <a href="https://en.wikipedia.org/wiki/Tiergarten_(park)">Only Munich&rsquo;s Englischer Garten and the Tempelhofer Feld, also in Berlin, are larger.</a></p>

<p>Now that I&rsquo;m on it, the second park under investigation is the <a href="https://de.wikipedia.org/wiki/Tempelhofer_Feld"><strong>Tempelhofer Feld</strong></a>. The Tempelhofer Feld is with 355 ha <a href="http://www.zeit.de/lebensart/2012-09/lust-auf-stadt-tempelhofer-feld">the largest inner-city open space in the world</a>. It is dominated by meadows but <a href="https://berlin.nabu.de/stadt-und-natur/stadtentwicklung/tempelhofer-feld/geschichte.html">has at least 20 hectares of endangered and protected dry sand grassland and 27 hectares of plain oatmeal meadow</a>.
<br><br></p>

<iframe seamless src="https://philippgaertner.github.io/img/2017-10-tempelhof-tiergarten/leaflet_map.html", style="float:right, clear:both", frameBorder="0", scrolling="no", width="100%", height="300"></iframe>

<h2 id="data-generation-in-earth-engine">Data generation in Earth Engine</h2>

<p>The data basis for the illustration of the seasonal density change in the park vegetation were satellite images. Here, I used all USGS provided images (&gt; 260) of <a href="https://explorer.earthengine.google.com/#detail/LANDSAT%2FLC08%2FC01%2FT1_TOA">Landsat 8 Collection 1 Tier 1</a>, for each of the two parks, determined the <a href="https://earthobservatory.nasa.gov/Features/MeasuringVegetation/">Normalized Difference Vegetation Index</a> (NDVI) and created a monthly NDVI histogram for all cloudless pixels depending on the date of recording and exported the result as .geojson. Very helpful was <a href="https://developers.google.com/earth-engine/ic_composite_mosaic">this page</a> in the GEE Documentation.
<br><br>
In order to run the code you need access to the park polygons. Hereby I share the links to the <a href="https://code.earthengine.google.com/?asset=users/gaertnerp/Grosser_Tiergarten_UTM33N">Tiergarten</a> und <a href="https://code.earthengine.google.com/?asset=users/gaertnerp/Tempelhofer_Feld_UTM33N">Tempelhof</a> shapes, so everybody has read access to the asset and will be able to view und use them in the code editor.</p>

<h4 id="getdata">GetData</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// Javascript
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// This function gets NDVI from a Landsat 8 image.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">addNDVI</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">image</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">addBands</span>(<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">normalizedDifference</span>([<span style="color:#e6db74">&#39;B5&#39;</span>, <span style="color:#e6db74">&#39;B4&#39;</span>]));
};

<span style="color:#75715e">// This function masks cloudy pixels.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cloudMask</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">image</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">clouds</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Algorithms</span>.<span style="color:#a6e22e">Landsat</span>.<span style="color:#a6e22e">simpleCloudScore</span>(<span style="color:#a6e22e">image</span>).<span style="color:#a6e22e">select</span>([<span style="color:#e6db74">&#39;cloud&#39;</span>]);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">updateMask</span>(<span style="color:#a6e22e">clouds</span>.<span style="color:#a6e22e">lt</span>(<span style="color:#ae81ff">25</span>));
};

<span style="color:#75715e">// Load a Landsat collection, map the NDVI and cloud masking functions over it.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">collection</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">ImageCollection</span>(<span style="color:#e6db74">&#39;LANDSAT/LC08/C01/T1_TOA&#39;</span>)
  .<span style="color:#a6e22e">filterBounds</span>(<span style="color:#a6e22e">Tiergarten</span>.<span style="color:#a6e22e">geometry</span>())
  .<span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Filter</span>.<span style="color:#a6e22e">calendarRange</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">12</span>, <span style="color:#e6db74">&#34;month&#34;</span>)) <span style="color:#75715e">// only December
</span><span style="color:#75715e"></span>  .<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">addNDVI</span>)
  .<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">cloudMask</span>);

<span style="color:#75715e">// Reduce the collection to the medan of each pixel and display.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">medianImage</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">reduce</span>(<span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Reducer</span>.<span style="color:#a6e22e">median</span>());

<span style="color:#75715e">// Reduce the region. The region parameter is the Feature geometry.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">median_Dictionary</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">medianImage</span>.<span style="color:#a6e22e">select</span>([<span style="color:#e6db74">&#39;nd_median&#39;</span>]).<span style="color:#a6e22e">reduceRegion</span>({
  <span style="color:#a6e22e">reducer</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Reducer</span>.<span style="color:#a6e22e">histogram</span>({<span style="color:#a6e22e">minBucketWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.01</span>}),
  <span style="color:#a6e22e">geometry</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Tiergarten</span>.<span style="color:#a6e22e">geometry</span>(),
  <span style="color:#a6e22e">scale</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,
  <span style="color:#a6e22e">bestEffort</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
});

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">FC</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Dictionary</span>({<span style="color:#a6e22e">median_Dictionary</span><span style="color:#f92672">:</span><span style="color:#a6e22e">median_Dictionary</span>});

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">features</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Feature</span>(<span style="color:#66d9ef">null</span>, {<span style="color:#a6e22e">FC</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">FC</span>});
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">export_FC</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">FeatureCollection</span>([<span style="color:#a6e22e">features</span>]);

<span style="color:#a6e22e">Export</span>.<span style="color:#a6e22e">table</span>.<span style="color:#a6e22e">toDrive</span>({
  <span style="color:#a6e22e">collection</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">export_FC</span>,
  <span style="color:#a6e22e">folder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GEE&#39;</span>,
  <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Tiergarten_12&#39;</span>, 
  <span style="color:#a6e22e">fileFormat</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GeoJSON&#39;</span>
});




<span style="color:#75715e">// This function gets NDVI from a Landsat 8 image.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">addNDVI</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">image</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">addBands</span>(<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">normalizedDifference</span>([<span style="color:#e6db74">&#39;B5&#39;</span>, <span style="color:#e6db74">&#39;B4&#39;</span>]));
};

<span style="color:#75715e">// This function masks cloudy pixels.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cloudMask</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">image</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">clouds</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Algorithms</span>.<span style="color:#a6e22e">Landsat</span>.<span style="color:#a6e22e">simpleCloudScore</span>(<span style="color:#a6e22e">image</span>).<span style="color:#a6e22e">select</span>([<span style="color:#e6db74">&#39;cloud&#39;</span>]);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">updateMask</span>(<span style="color:#a6e22e">clouds</span>.<span style="color:#a6e22e">lt</span>(<span style="color:#ae81ff">25</span>));
};

<span style="color:#75715e">// Load a Landsat collection, map the NDVI and cloud masking functions over it.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">collection</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">ImageCollection</span>(<span style="color:#e6db74">&#39;LANDSAT/LC08/C01/T1_TOA&#39;</span>)
  .<span style="color:#a6e22e">filterBounds</span>(<span style="color:#a6e22e">Tiergarten</span>.<span style="color:#a6e22e">geometry</span>())
  .<span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Filter</span>.<span style="color:#a6e22e">calendarRange</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">12</span>, <span style="color:#e6db74">&#34;month&#34;</span>)) <span style="color:#75715e">// only December
</span><span style="color:#75715e"></span>  .<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">addNDVI</span>)
  .<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">cloudMask</span>);

<span style="color:#75715e">// Reduce the collection to the medan of each pixel and display.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">medianImage</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">reduce</span>(<span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Reducer</span>.<span style="color:#a6e22e">median</span>());

<span style="color:#75715e">// Reduce the region. The region parameter is the Feature geometry.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">median_Dictionary</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">medianImage</span>.<span style="color:#a6e22e">select</span>([<span style="color:#e6db74">&#39;nd_median&#39;</span>]).<span style="color:#a6e22e">reduceRegion</span>({
  <span style="color:#a6e22e">reducer</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Reducer</span>.<span style="color:#a6e22e">histogram</span>({<span style="color:#a6e22e">minBucketWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.01</span>}),
  <span style="color:#a6e22e">geometry</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Tiergarten</span>.<span style="color:#a6e22e">geometry</span>(),
  <span style="color:#a6e22e">scale</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,
  <span style="color:#a6e22e">bestEffort</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
});

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">FC</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Dictionary</span>({<span style="color:#a6e22e">median_Dictionary</span><span style="color:#f92672">:</span><span style="color:#a6e22e">median_Dictionary</span>});

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">features</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">Feature</span>(<span style="color:#66d9ef">null</span>, {<span style="color:#a6e22e">FC</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">FC</span>});
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">export_FC</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ee</span>.<span style="color:#a6e22e">FeatureCollection</span>([<span style="color:#a6e22e">features</span>]);

<span style="color:#a6e22e">Export</span>.<span style="color:#a6e22e">table</span>.<span style="color:#a6e22e">toDrive</span>({
  <span style="color:#a6e22e">collection</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">export_FC</span>,
  <span style="color:#a6e22e">folder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GEE&#39;</span>,
  <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Tiergarten_12&#39;</span>, 
  <span style="color:#a6e22e">fileFormat</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GeoJSON&#39;</span>
});</code></pre></div>


 
  
  
  
  
    
  
    
      
    
  

<div class="figure center" >
  
    <a class="fancybox" href="//res.cloudinary.com/dj9pbb7v1/image/upload/v1618129721/2017-10-tempelhof-tiergarten/ESRI_Landsat_Viewer_small.jpg" title="All available Landsat-8 satellite imagery for Berlin - ESRI Landsat Viewer." data-fancybox-group="">
  
    <img class="fig-img" src="//res.cloudinary.com/dj9pbb7v1/image/upload/v1618129721/2017-10-tempelhof-tiergarten/ESRI_Landsat_Viewer_small.jpg"  alt="All available Landsat-8 satellite imagery for Berlin - ESRI Landsat Viewer.">
  
    </a>
  
   
    <span class="caption">All available Landsat-8 satellite imagery for Berlin - ESRI Landsat Viewer.</span>
  
</div>


<h2 id="data-preprocessing-with-r">Data preprocessing with R</h2>

<p>In the following section I present the steps you have to take to get from an Earth Engine produced .json file to a the animated GIF. The following code chunks are written in R.</p>

<h4 id="load-all-necessary-libraries">Load all necessary libraries</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

library(needs) <span style="color:#75715e"># install.packages(&#34;needs&#34;)</span>
needs(devtools, RJSONIO, ggplot2, tweenr, stringr, plyr, matrixStats, gganimate)</code></pre></div>
<h4 id="load-the-data-from-the-gee-folder-into-a-data-frame">Load the data from the &lsquo;GEE&rsquo; folder into a data.frame</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

file <span style="color:#f92672">&lt;-</span> list<span style="color:#f92672">.</span>files(<span style="color:#e6db74">&#34;GEE&#34;</span>)

dd <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">.</span>frame()

<span style="color:#66d9ef">for</span>(i <span style="color:#f92672">in</span> <span style="color:#ae81ff">1</span>:length(file)) {

  d_json <span style="color:#f92672">&lt;-</span> RJSONIO::fromJSON(paste(<span style="color:#e6db74">&#34;GEE/&#34;</span>, file[[i]], sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>))

  hist        <span style="color:#f92672">&lt;-</span> d_json<span style="color:#960050;background-color:#1e0010">$</span>features[[<span style="color:#ae81ff">1</span>]]<span style="color:#960050;background-color:#1e0010">$</span>properties<span style="color:#960050;background-color:#1e0010">$</span>FC<span style="color:#960050;background-color:#1e0010">$</span>median_Dictionary<span style="color:#960050;background-color:#1e0010">$</span>nd_median<span style="color:#960050;background-color:#1e0010">$</span>histogram
  bucketMeans <span style="color:#f92672">&lt;-</span> d_json<span style="color:#960050;background-color:#1e0010">$</span>features[[<span style="color:#ae81ff">1</span>]]<span style="color:#960050;background-color:#1e0010">$</span>properties<span style="color:#960050;background-color:#1e0010">$</span>FC<span style="color:#960050;background-color:#1e0010">$</span>median_Dictionary<span style="color:#960050;background-color:#1e0010">$</span>nd_median<span style="color:#960050;background-color:#1e0010">$</span>bucketMeans
  df <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">.</span>frame(bucketMeans, hist, file[[i]])
  dd <span style="color:#f92672">&lt;-</span> rbind(dd, df)
  
}

colnames(dd) <span style="color:#f92672">&lt;-</span> c(<span style="color:#e6db74">&#34;bucketMeans&#34;</span>, <span style="color:#e6db74">&#34;hist&#34;</span>,<span style="color:#e6db74">&#34;i&#34;</span>) <span style="color:#75715e"># rename d.f columns</span>
head(dd, n <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)

<span style="color:#75715e">##   bucketMeans hist                 i</span>
<span style="color:#75715e">## 1 -0.06514288    2 Tempelhof_01.json</span>
<span style="color:#75715e">## 2 -0.05500000    0 Tempelhof_01.json</span></code></pre></div>
<p><code>dd</code> is the result of the histogram reducer which divided the entire range of image values into a series of intervals—and then counted how many values fall into each interval.
<code>bucketMeans</code> represents the bin (intervals) and <code>hist</code> the value count and <code>i</code> is the file name.</p>

<h4 id="split-column-i-and-create-a-location-and-month-column">Split column <code>i</code> and create a <code>location</code> and <code>month</code> column</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

a    <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">.</span>frame(str_split(dd<span style="color:#960050;background-color:#1e0010">$</span>i, <span style="color:#e6db74">&#34;_&#34;</span>))
a    <span style="color:#f92672">&lt;-</span> t(a)
a    <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">.</span>frame(a)
a<span style="color:#960050;background-color:#1e0010">$</span>X2 <span style="color:#f92672">&lt;-</span> str_replace(a<span style="color:#960050;background-color:#1e0010">$</span>X2, <span style="color:#e6db74">&#34;.json&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>)

dd<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">&lt;-</span> a<span style="color:#960050;background-color:#1e0010">$</span>X1               <span style="color:#75715e"># column location</span>
dd<span style="color:#960050;background-color:#1e0010">$</span>month    <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">as</span><span style="color:#f92672">.</span>numeric(a<span style="color:#960050;background-color:#1e0010">$</span>X2)   <span style="color:#75715e"># column month</span>
dd<span style="color:#960050;background-color:#1e0010">$</span>i        <span style="color:#f92672">&lt;-</span> NULL               <span style="color:#75715e"># remove original &#34;i&#34; column</span>
dd<span style="color:#960050;background-color:#1e0010">$</span>hist     <span style="color:#f92672">&lt;-</span> round(dd<span style="color:#960050;background-color:#1e0010">$</span>hist, <span style="color:#ae81ff">0</span>)

colnames(dd) <span style="color:#f92672">&lt;-</span> c(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>, <span style="color:#e6db74">&#34;location&#34;</span>, <span style="color:#e6db74">&#34;month&#34;</span>)
str(dd)

<span style="color:#75715e">## &#39;data.frame&#39;:	1733 obs. of  4 variables:</span>
<span style="color:#75715e">##  $ x       : num  -0.0651 -0.055 -0.0439 -0.035 -0.0299 ...</span>
<span style="color:#75715e">##  $ y       : num  2 0 4 0 2 1 2 2 15 66 ...</span>
<span style="color:#75715e">##  $ location: Factor w/ 2 levels &#34;Tempelhof&#34;,&#34;Tiergarten&#34;: 1 1 1 1 1 1 1 1 1 1 ...</span>
<span style="color:#75715e">##  $ month   : num  1 1 1 1 1 1 1 1 1 1 ...</span>


summary(dd)

<span style="color:#75715e">##        x                 y                location       month       </span>
<span style="color:#75715e">##  Min.   :-0.1706   Min.   :  0.00   Tempelhof :815   Min.   : 1.000  </span>
<span style="color:#75715e">##  1st Qu.: 0.1450   1st Qu.:  3.00   Tiergarten:918   1st Qu.: 4.000  </span>
<span style="color:#75715e">##  Median : 0.3251   Median : 25.00                    Median : 7.000  </span>
<span style="color:#75715e">##  Mean   : 0.3274   Mean   : 57.09                    Mean   : 6.563  </span>
<span style="color:#75715e">##  3rd Qu.: 0.5059   3rd Qu.: 70.00                    3rd Qu.: 9.000  </span>
<span style="color:#75715e">##  Max.   : 0.8316   Max.   :486.00                    Max.   :12.000</span></code></pre></div>
<h4 id="round-bin-values-and-create-dummy-a-data-frame">Round bin values and create dummy a <code>data.frame</code></h4>

<p>To make the visualization easier we need for each month the same amout of <code>bins</code>, so I create a dummy <code>data.frame</code> with all possible value combination between <code>x</code> (bins)
and <code>month</code>, starting from -0.2 until 0.9.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

dd<span style="color:#960050;background-color:#1e0010">$</span>x        <span style="color:#f92672">&lt;-</span> round_any(dd<span style="color:#960050;background-color:#1e0010">$</span>x, accuracy <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.01</span>, f <span style="color:#f92672">=</span> ceiling) 

<span style="color:#75715e"># 12 (month) * 111 (NDVI value) = 1332 in total (ideal world row numbers) </span>
combn_NDVI  <span style="color:#f92672">&lt;-</span> seq(<span style="color:#f92672">-</span><span style="color:#ae81ff">0.2</span>,<span style="color:#ae81ff">0.9</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.01</span>)
combn_month <span style="color:#f92672">&lt;-</span> seq(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">12</span>    , by <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)

tempelhof <span style="color:#f92672">&lt;-</span> tiergarten <span style="color:#f92672">&lt;-</span> data<span style="color:#f92672">.</span>frame(month <span style="color:#f92672">=</span> rep(combn_month, each <span style="color:#f92672">=</span> length(combn_NDVI)),
                                      x     <span style="color:#f92672">=</span> rep(combn_NDVI, <span style="color:#ae81ff">12</span>),              
                                      y     <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) 

tiergarten<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Tiergarten&#34;</span>
tempelhof<span style="color:#960050;background-color:#1e0010">$</span>location  <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Tempelhof&#34;</span>

df <span style="color:#f92672">&lt;-</span> rbind(tiergarten, tempelhof)
dim(df)
<span style="color:#75715e">## [1] 2664    4</span></code></pre></div>
<h4 id="merge-gee-data-and-the-dummy-data-frame">Merge GEE data and the dummy <code>data.frame</code></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

dat <span style="color:#f92672">&lt;-</span> merge(x <span style="color:#f92672">=</span> dd, y <span style="color:#f92672">=</span> df, by <span style="color:#f92672">=</span> c(<span style="color:#e6db74">&#34;location&#34;</span>, <span style="color:#e6db74">&#34;month&#34;</span>, <span style="color:#e6db74">&#34;x&#34;</span>), 
                     all<span style="color:#f92672">.</span>y <span style="color:#f92672">=</span> T)

dat[<span style="color:#f92672">is</span><span style="color:#f92672">.</span>na(dat)] <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">0</span>     <span style="color:#75715e"># convert NA&#39;s to 0</span>
dat<span style="color:#960050;background-color:#1e0010">$</span>y<span style="color:#f92672">.</span>y         <span style="color:#f92672">&lt;-</span> NULL  <span style="color:#75715e"># delete uncessesary columns</span>
colnames(dat)   <span style="color:#f92672">&lt;-</span> c(<span style="color:#e6db74">&#34;location&#34;</span>, <span style="color:#e6db74">&#34;time&#34;</span> ,<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>)</code></pre></div>
<h5 id="smooth-the-curve">Smooth the curve</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

dat_temp  <span style="color:#f92672">&lt;-</span> dat[dat<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Tempelhof&#34;</span>, ]
dat_tier  <span style="color:#f92672">&lt;-</span> dat[dat<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Tiergarten&#34;</span>, ]

do_it <span style="color:#f92672">&lt;-</span> function(dataset) {
  models <span style="color:#f92672">&lt;-</span> dlply(dataset, <span style="color:#f92672">.</span>(time), function(df) loess(y <span style="color:#f92672">~</span> x, data <span style="color:#f92672">=</span> df, span <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.1</span>))
  predict(models[[<span style="color:#ae81ff">1</span>]])
  
  x <span style="color:#f92672">&lt;-</span> ldply(models, predict)
  
  library(reshape)
  xx <span style="color:#f92672">&lt;-</span> melt(x, id <span style="color:#f92672">=</span> c(<span style="color:#e6db74">&#34;time&#34;</span>))
  xx <span style="color:#f92672">&lt;-</span> xx[order(xx<span style="color:#960050;background-color:#1e0010">$</span>time),]
  <span style="color:#66d9ef">return</span>(xx)
}

xx <span style="color:#f92672">&lt;-</span> do_it(dat_temp)
dat_temp<span style="color:#960050;background-color:#1e0010">$</span>y_loess <span style="color:#f92672">&lt;-</span> round(xx<span style="color:#960050;background-color:#1e0010">$</span>value, <span style="color:#ae81ff">1</span>)
dat_temp<span style="color:#960050;background-color:#1e0010">$</span>y_loess[dat_temp<span style="color:#960050;background-color:#1e0010">$</span>y_loess <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># remove values beyond zero</span>

<span style="color:#75715e">####</span>

xx <span style="color:#f92672">&lt;-</span> do_it(dat_tier)
dat_tier<span style="color:#960050;background-color:#1e0010">$</span>y_loess <span style="color:#f92672">&lt;-</span> round(xx<span style="color:#960050;background-color:#1e0010">$</span>value,<span style="color:#ae81ff">1</span>)
dat_tier<span style="color:#960050;background-color:#1e0010">$</span>y_loess[dat_tier<span style="color:#960050;background-color:#1e0010">$</span>y_loess <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">0</span>

tail(dat_tier, n <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)

<span style="color:#75715e">##        location time    x y y_loess</span>
<span style="color:#75715e">## 2663 Tiergarten   12 0.89 0       0</span>
<span style="color:#75715e">## 2664 Tiergarten   12 0.90 0       0</span></code></pre></div>
<h4 id="add-the-ease-and-group-columns-for-tweenr">Add the <code>ease</code> and <code>group</code> columns for <code>tweenr</code></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

create_ease_and_group_for_tween <span style="color:#f92672">&lt;-</span> function(dataset) {

  dataset<span style="color:#960050;background-color:#1e0010">$</span>ease  <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;linear&#34;</span>
  dataset       <span style="color:#f92672">&lt;-</span> dataset[order(dataset<span style="color:#960050;background-color:#1e0010">$</span>x),]
  dataset<span style="color:#960050;background-color:#1e0010">$</span>group <span style="color:#f92672">&lt;-</span> rep(<span style="color:#ae81ff">1</span>:length(combn_NDVI), each <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>)      
  
  dataset_tween <span style="color:#f92672">&lt;-</span> tween_elements(data <span style="color:#f92672">=</span> dataset, time <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;time&#39;</span>, group <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;group&#39;</span>, 
                                   ease <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ease&#39;</span>, nframes <span style="color:#f92672">=</span> <span style="color:#ae81ff">111</span>)
  <span style="color:#66d9ef">return</span>(dataset_tween)
}

dat_temp_tween <span style="color:#f92672">&lt;-</span> create_ease_and_group_for_tween(dat_temp)
dat_tier_tween <span style="color:#f92672">&lt;-</span> create_ease_and_group_for_tween(dat_tier)

dat_tween       <span style="color:#f92672">&lt;-</span> rbind(dat_temp_tween, dat_tier_tween)
dat_tween<span style="color:#960050;background-color:#1e0010">$</span>label <span style="color:#f92672">&lt;-</span> round(dat_tween<span style="color:#960050;background-color:#1e0010">$</span>time,<span style="color:#ae81ff">0</span>)
dat_tween<span style="color:#960050;background-color:#1e0010">$</span>label <span style="color:#f92672">&lt;-</span> month<span style="color:#f92672">.</span>name[dat_tween<span style="color:#960050;background-color:#1e0010">$</span>label]

dim(dat_tween)

<span style="color:#75715e">## [1] 24864     8</span>


tail(dat_tween, n <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)

<span style="color:#75715e">##          location time    x y y_loess .frame .group    label</span>
<span style="color:#75715e">## 109761 Tiergarten   12 0.77 0       0    111     98 December</span>
<span style="color:#75715e">## 110881 Tiergarten   12 0.78 0       0    111     99 December</span></code></pre></div>
<h4 id="calculate-a-median-for-every-point-in-time">Calculate a median for every point in time</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

gg_df <span style="color:#f92672">&lt;-</span> ddply(dat_tween, <span style="color:#f92672">.</span>(location, time), mutate,
                          weighted_median <span style="color:#f92672">=</span> weightedMedian(x,y_loess))

tail(gg_df, n <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)

<span style="color:#75715e">##         location time    x y y_loess .frame .group    label</span>
<span style="color:#75715e">## 24863 Tiergarten   12 0.77 0       0    111     98 December</span>
<span style="color:#75715e">## 24864 Tiergarten   12 0.78 0       0    111     99 December</span>
<span style="color:#75715e">##       weighted_median</span>
<span style="color:#75715e">## 24863       0.2403083</span>
<span style="color:#75715e">## 24864       0.2403083</span></code></pre></div>
<h1 id="plot-the-graph-with-ggplot-tweenr">Plot the graph with ggplot + tweenr</h1>

<h4 id="create-the-ggplot-tweenr-histogram-animation-for-the-tempelhofer-feld-and-the-tiergarten">Create the <code>ggplot</code> + <code>tweenr</code> histogram animation for the Tempelhofer Feld and the Tiergarten</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">### R</span>

p <span style="color:#f92672">&lt;-</span> ggplot(data <span style="color:#f92672">=</span> gg_df) <span style="color:#f92672">+</span> 
  <span style="color:#75715e"># add label for time (month)</span>
  geom_text(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tiergarten&#39;</span>),],
          aes(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.42</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">400</span>, frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame, label <span style="color:#f92672">=</span> label), 
          fontface <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#d9d9d9&#34;</span>) <span style="color:#f92672">+</span> 
  <span style="color:#75715e"># add median point for Tempelhof</span>
  geom_segment(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tempelhof&#39;</span>),],
               aes(x <span style="color:#f92672">=</span> weighted_median, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, xend <span style="color:#f92672">=</span> weighted_median, yend <span style="color:#f92672">=</span> <span style="color:#ae81ff">490</span>,
                   frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame), size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#737373&#34;</span>) <span style="color:#f92672">+</span> 
  <span style="color:#75715e"># add label for time (month) </span>
  geom_text(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tempelhof&#39;</span>),],
          aes(x <span style="color:#f92672">=</span> weighted_median, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">540</span>, frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame, 
              label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Median</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Tempelhofer Feld&#34;</span>),size <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#737373&#34;</span>) <span style="color:#f92672">+</span> 
  <span style="color:#75715e"># add median point for Tiergarten</span>
  geom_segment(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tiergarten&#39;</span>),],
               aes(x <span style="color:#f92672">=</span> weighted_median, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, xend <span style="color:#f92672">=</span> weighted_median, yend <span style="color:#f92672">=</span> <span style="color:#ae81ff">490</span>,
                   frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame), colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#737373&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> 
  <span style="color:#75715e"># add median text for Tiergarten</span>
  geom_text(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tiergarten&#39;</span>),],
          aes(x <span style="color:#f92672">=</span> weighted_median, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">540</span>, frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame, 
              label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Median</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Tiergarten&#34;</span>),size <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#737373&#34;</span>) <span style="color:#f92672">+</span> 
  <span style="color:#75715e"># add NDVI ribbon for Tempelhof</span>
  geom_ribbon(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tempelhof&#39;</span>),], 
              aes(x <span style="color:#f92672">=</span> x, ymin <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, ymax <span style="color:#f92672">=</span> y_loess, fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#2CA02C&#34;</span>,frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame),
              alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.6</span>) <span style="color:#f92672">+</span>
  <span style="color:#75715e"># add NDVI ribbon for Tiergarten</span>
  geom_ribbon(data <span style="color:#f92672">=</span> gg_df[which(gg_df<span style="color:#960050;background-color:#1e0010">$</span>location <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Tiergarten&#39;</span>),],
              aes(x <span style="color:#f92672">=</span> x, ymin <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, ymax <span style="color:#f92672">=</span> y_loess, frame <span style="color:#f92672">=</span> <span style="color:#f92672">.</span>frame, fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#FF7F0E&#34;</span>),
              alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.6</span>) <span style="color:#f92672">+</span>
  labs(x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#f92672">+</span> theme_bw() <span style="color:#f92672">+</span> xlim(<span style="color:#f92672">-</span><span style="color:#ae81ff">0.1</span>, <span style="color:#ae81ff">0.9</span>) <span style="color:#f92672">+</span> ylim(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">600</span>) <span style="color:#f92672">+</span> 
  scale_fill_manual(values   <span style="color:#f92672">=</span> c(<span style="color:#e6db74">&#34;#2CA02C&#34;</span>, <span style="color:#e6db74">&#34;#FF7F0E&#34;</span>), 
                      labels <span style="color:#f92672">=</span> c(<span style="color:#e6db74">&#34;Tempelhofer Feld   &#34;</span>, <span style="color:#e6db74">&#34;Tiergarten&#34;</span>)) <span style="color:#f92672">+</span> 
  scale_x_continuous(breaks <span style="color:#f92672">=</span> c(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.25</span>, <span style="color:#ae81ff">0.375</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.75</span>), 
                     labels <span style="color:#f92672">=</span> c(<span style="color:#e6db74">&#34;Low&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;Medium&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;High&#34;</span>)) <span style="color:#f92672">+</span> 
  theme(legend<span style="color:#f92672">.</span>position   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>, 
        legend<span style="color:#f92672">.</span>title      <span style="color:#f92672">=</span> element_blank(),
         axis<span style="color:#f92672">.</span>text<span style="color:#f92672">.</span>x      <span style="color:#f92672">=</span> element_text(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>, colour <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#737373&#34;</span>),
         axis<span style="color:#f92672">.</span>line<span style="color:#f92672">.</span>y      <span style="color:#f92672">=</span> element_blank(), 
         axis<span style="color:#f92672">.</span>line<span style="color:#f92672">.</span>x      <span style="color:#f92672">=</span> element_blank(),
         panel<span style="color:#f92672">.</span>border     <span style="color:#f92672">=</span> element_blank(),
         axis<span style="color:#f92672">.</span>text<span style="color:#f92672">.</span>y      <span style="color:#f92672">=</span> element_blank(),
         axis<span style="color:#f92672">.</span>ticks       <span style="color:#f92672">=</span> element_blank(),
         panel<span style="color:#f92672">.</span>grid<span style="color:#f92672">.</span>major <span style="color:#f92672">=</span> element_blank(),
         panel<span style="color:#f92672">.</span>grid<span style="color:#f92672">.</span>minor <span style="color:#f92672">=</span> element_blank(),
         panel<span style="color:#f92672">.</span>background <span style="color:#f92672">=</span> element_blank(),
         strip<span style="color:#f92672">.</span>background <span style="color:#f92672">=</span> element_blank(),
         legend<span style="color:#f92672">.</span>text      <span style="color:#f92672">=</span> element_text(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>, colour <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#737373&#34;</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>),
         legend<span style="color:#f92672">.</span>key<span style="color:#f92672">.</span>size  <span style="color:#f92672">=</span> unit(<span style="color:#ae81ff">1.5</span>, <span style="color:#e6db74">&#39;cm&#39;</span>)) <span style="color:#f92672">+</span> 
  guides(fill <span style="color:#f92672">=</span> guide_legend(keywidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.5</span>, keyheight <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.5</span>))
        
  
animation::ani<span style="color:#f92672">.</span>options(interval <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">5</span>)
gganimate(p, <span style="color:#e6db74">&#39;Histogram_Tiergarten_Tempelhof_animated_0_01.gif&#39;</span>, 
          title_frame <span style="color:#f92672">=</span> F, 
          ani<span style="color:#f92672">.</span>width <span style="color:#f92672">=</span> <span style="color:#ae81ff">800</span>, 
          ani<span style="color:#f92672">.</span>height <span style="color:#f92672">=</span> <span style="color:#ae81ff">400</span>)

<span style="color:#75715e">## Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which</span>
<span style="color:#75715e">## will replace the existing scale.</span></code></pre></div>
<!--![](/img/Tier_Temp_ggplot_y_0_01.png)-->

</div>
<div class="figure figure--fullWidth">
  <img class="figure-img" src="//res.cloudinary.com/dj9pbb7v1/image/upload/v1618129999/2017-10-tempelhof-tiergarten/Tier_Temp_ggplot.png" alt="Intra-annual vegetation density changes of two public parks in Berlin, Germany" /><span class="caption">Intra-annual vegetation density changes of two public parks in Berlin, Germany</span>
</div>
<div class="main-content-wrap">

<h1 id="intra-annual-vegetation-density-changes">Intra-annual vegetation density changes</h1>

<p>Unfortunately I don&rsquo;t have any field data to validate my comments on the graphic here, so please use caution.</p>

<ul>
<li>The median NDVI values of the Tempelhofer Feld are higher in the winter and spring months than in the Tiergarten. The process of photosynthesis in the sprouts is reduced to a minimum. However, the sprouts of the grasses grow actively at temperatures &gt; 10 °C and we&rsquo;ve had a few days over the last few years far above these temperatures. Furthermore, the Tiergarten is stocked +/-  50% with deciduous trees and those lose their leaves in autumn. The autumn leaf also no longer forms a new chlorophyll and thus gradually loses its green colour, the NDVI decreases.</li>
<li>In June, all the trees in the Tiergarten have turned out their leaves and the meadows grow superbly on the Tempelhofer Feld. Nevertheless, the multi-layered canopy roof in the Tiergarten usually has a higher leaf-area and canopy density which have generaly a positive relationship with the NDVI. In consequence, the Tiergarten has higher NDVI values in the summer months.</li>
<li>In January there are significantly fewer values in the histogram than in summer. The reason for this is that the cloud pixels were filtered out during the histogram calculation.</li>
</ul>

<h1 id="bottom-line">Bottom line</h1>

<p>You can <strong>cite</strong> this blogpost using: <em>Gärtner, Philipp (2017/11/07) “Intra-annual vegetation density changes of two public parks in Berlin, Germany”, <a href="https://philippgaertner.github.io/2017/10/tempelhof_tiergarten/">https://philippgaertner.github.io/2017/10/tempelhof_tiergarten/</a></em></p>

<hr />

<p>If you have any questions, suggestions or spotted a mistake, please use the comment function at the bottom of this page.</p>

<p>Previous blog posts are available within the <a href="https://philippgaertner.github.io/archives/">blog archive</a>. Feel free to connect or follow me on Twitter - <a href="https://twitter.com/Mixed_Pixels" target="_blank">@Mixed_Pixels</a>.</p>

<h1 id="data-source">Data Source</h1>

<ul>
<li>Park Polygons: The park polygons come from Michael Hörz <a href="https://github.com/m-hoerz/berlin-shapes">berlin-shapes</a> github repository.</li>
<li>Satellite Data: The Landsat 8 Collection 1 Tier 1 calibrated top-of-atmosphere reflectance datat are provided by the USGS and made available by google as <a href="https://explorer.earthengine.google.com/#detail/LANDSAT%2FLC08%2FC01%2FT1_TOA">ImageCollection</a>.</li>
</ul>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://philippgaertner.github.io/tags/landsat-8/">Landsat-8</a>

  <a class="tag tag--primary tag--small" href="https://philippgaertner.github.io/tags/google-earth-engine/">Google-Earth-Engine</a>

  <a class="tag tag--primary tag--small" href="https://philippgaertner.github.io/tags/ggplot2/">ggplot2</a>

  <a class="tag tag--primary tag--small" href="https://philippgaertner.github.io/tags/tweenr/">tweenr</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://philippgaertner.github.io/2017/12/berlin-soccer-fields/" data-tooltip="The FIFA World Cup in 2006 had an impact on the development of Berlin&#39;s soccer fields">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://philippgaertner.github.io/2017/10/profiler/" data-tooltip="Diagnose Earth Engine performance with the profiler">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="0l94rzR" data-color="#ffffff" data-emoji=""  data-font="Cookie" data-text="Coffee for Philipp" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#000000" ></script>&copy; 2017 - 2022 Philipp Gärtner &VerticalSeparator; Some Rights Reserved<br>Content on this site is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license</a>.
  </span>
</footer> 
      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://philippgaertner.github.io/2017/12/berlin-soccer-fields/" data-tooltip="The FIFA World Cup in 2006 had an impact on the development of Berlin&#39;s soccer fields">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://philippgaertner.github.io/2017/10/profiler/" data-tooltip="Diagnose Earth Engine performance with the profiler">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://res.cloudinary.com/dj9pbb7v1/image/upload/v1496825790/qQv2L8sO_o2jbiq.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Philipp Gärtner</h4>
    
      <div id="about-card-bio">Jack of all trades, master of some.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Staff at the Federal Environment Agency
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Berlin, Germany
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://philippgaertner.github.io/images/blur.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://philippgaertner.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/philippgaertner.github.io\/2017\/10\/tempelhof_tiergarten\/';
          
            this.page.identifier = '\/2017\/10\/tempelhof_tiergarten\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'gartn001';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script>
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#2D2D39"
    },
    "button": {
      "background": "#14a7d0"
    }
  },
  "theme": "edgeless",
  "position": "bottom-right",
  "content": {
      "message": "This website uses cookies for Google Analytics so that I know how many people are reading the blog and which blogposts are the most popular. The website does not collect any personal data.",
  "href": "https://www.cookiesandyou.com/"
  }
});
</script>
  </body>
</html>

